<!DOCTYPE html>
<html lang="zh-Hans">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>伊蕾娜 · 魔女之旅 | Journey of Elaina – Fan Page</title>
  <meta name="description" content="《魔女之旅》伊蕾娜个人介绍。" />
  <meta name="color-scheme" content="dark light" />
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300..800&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="./assets/style.css" />
</head>

<body>
  <header>
    <nav class="nav">
      <div class="brand">
        <div class="logo" aria-hidden="true"></div>
        <span>Elaina · <span data-i18n="title">魔女之旅</span></span>
      </div>
      <button id="langToggle">EN</button>
    </nav>
  </header>

  <main class="wrap">
    <section class="hero">
      <div>
        <img class="hero-img" alt="Elaina" src="./assets/images/image.webp" />
      </div>
      <div>
        <h2 data-i18n="heading">伊蕾娜（Elaina）——以书为帆，以旅为名</h2>
        <p data-i18n="intro1">
          伊蕾娜是轻小说/动画《魔女之旅》的主角。她自幼憧憬“星屑魔女”，以过人的天赋通过严格试炼，成为一名自由旅行的魔女。她以敏锐的观察与温柔的克制记录每段旅程：有温情、有讽喻，也有无法改变的无常。
        </p>
      </div>
    </section>

    <section>
      <div style="display: flex; gap: 10px; align-items: center;">
        <h2 data-i18n="gallery">图片集</h2>
        <a href="https://x.com/azure_0608_sub" target="_blank" rel="noreferrer noopener"
          style="font-size: large;">あずーる</a>
      </div>
      <div class="gallery-masonry" id="gallery"></div>
    </section>

    <footer>
      <span>© <span id="year"></span> Elaina Fan Page · 非官方</span>
      <div class="links">
        <a href="https://github.com/JustElaina" target="_blank" rel="noreferrer noopener">GitHub</a>
        <a href="#" id="topLink">↑ Top</a>
      </div>
    </footer>
  </main>

  <script>
    document.getElementById("topLink").addEventListener("click", (e) => {
      e.preventDefault();
      window.scrollTo({ top: 0, behavior: "smooth" });
    });

    const langToggle = document.getElementById('langToggle');

    // 切换语言函数
    langToggle.addEventListener('click', () => {
      const currentLang = document.documentElement.lang.startsWith('zh') ? 'zh' : 'en';
      const newLang = currentLang === 'zh' ? 'en' : 'zh';
      applyI18n(newLang);
      langToggle.textContent = newLang.toUpperCase(); // 更新按钮文字
    });

    // 初始化按钮文字
    langToggle.textContent = getLang() === 'zh' ? 'ZH' : 'EN';


    document.getElementById("year").textContent = new Date().getFullYear();
    const dict = {
      zh: {
        title: "魔女之旅",
        heading: "伊蕾娜（Elaina）——以书为帆，以旅为名",
        intro1:
          "伊蕾娜是轻小说/动画《魔女之旅》的主角。她自幼憧憬“星屑魔女”，以过人的天赋通过严格试炼，成为一名自由旅行的魔女。她以敏锐的观察与温柔的克制记录每段旅程：有温情、有讽喻，也有无法改变的无常。",
        intro2: "",
        gallery: "图片集",
      },
      en: {
        title: "The Journey of Elaina",
        heading: "Elaina — Sailing with Books, Named by Journeys",
        intro1:
          "Elaina is the protagonist of the light novel/anime “Wandering Witch: The Journey of Elaina”. Gifted and inspired by the Stardust Witch, she endures rigorous trials to become a free-roaming witch, observing the world with empathy and restraint.",
        intro2: "",
        gallery: "Gallery",
      },
    };
    function getLang() {
      return (navigator.language || "en").toLowerCase().startsWith("zh")
        ? "zh"
        : "en";
    }
    function applyI18n(lang) {
      const pack = dict[lang] || dict.en;
      document.documentElement.lang = lang === "zh" ? "zh-Hans" : "en";
      document.querySelectorAll("[data-i18n]").forEach((el) => {
        const key = el.getAttribute("data-i18n");
        if (pack[key]) el.textContent = pack[key];
      });
    }
    applyI18n(getLang());

    // 通过 JS 添加图片
    const images = [
      "./assets/images/01.jpg",
      "./assets/images/02.jpg",
      "./assets/images/03.jpg",
      "./assets/images/04.jpg",
      "./assets/images/05.jpg",
      "./assets/images/06.jpg",
      "./assets/images/07.jpg",
      "./assets/images/08.jpg",
      "./assets/images/08-1.jpg",
      "./assets/images/09.jpg",
      "./assets/images/10.jpg",
      "./assets/images/11.jpg",
      "./assets/images/11-1.jpg",
      "./assets/images/12.jpg",
      "./assets/images/13.jpg",
      "./assets/images/14.jpg",
      "./assets/images/14-1.jpg",
      "./assets/images/15.jpg",
      "./assets/images/16.jpg",
      "./assets/images/17.jpg",
      "./assets/images/17-1.jpg",
      './assets/images/18.jpg',
      './assets/images/19.jpg',
      './assets/images/20.jpg',
      './assets/images/21.jpg',
      "./assets/images/22.jpg",
      "./assets/images/23.jpg",
      "./assets/images/s01.jpg",
      "./assets/images/s02.jpg",
      "./assets/images/s03.jpg",
      "./assets/images/s04.jpg",
      "./assets/images/s05.jpg",
      "./assets/images/s06.jpg",
      "./assets/images/a01.jpg",
      "./assets/images/a02.jpg",
      "./assets/images/b01.jpg",
      "./assets/images/b02.jpg",
      "./assets/images/c01.jpg",
      "./assets/images/c02.jpg",
    ];

    // 根据屏幕宽度计算列数
    function getColumnsCount() {
      const w = window.innerWidth;
      if (w <= 540) return 1;
      if (w <= 820) return 2;
      if (w <= 1100) return 3;
      return 4;
    }

    // 渲染图片
    function renderGallery() {
      gallery.innerHTML = '';
      const colCount = getColumnsCount();
      const cols = [];

      // 创建列
      for (let i = 0; i < colCount; i++) {
        const col = document.createElement('div');
        col.className = 'gallery-column';
        cols.push(col);
        gallery.appendChild(col);
      }

      // 按行从左到右分配图片
      images.forEach((src, idx) => {
        const img = document.createElement('img');
        img.src = src;
        img.loading = 'lazy';
        img.alt = 'Elaina';

        // 按行从左到右: idx % colCount 决定列
        const colIndex = idx % colCount;
        cols[colIndex].appendChild(img);
      });
    }

    // 初次渲染
    renderGallery();

    // 窗口大小变化时重新渲染
    window.addEventListener('resize', renderGallery);

  </script>
</body>

</html>